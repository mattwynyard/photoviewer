{"version":3,"sources":["CustomNav.js","canvas-layer.js","App.js","serviceWorker.js","index.js"],"names":["CustomNav","props","setTitle","user","setState","title","state","onClick","func","this","Nav","className","Link","id","href","NavDropdown","Item","React","Component","L","DomUtil","setTransform","el","offset","scale","pos","Point","style","TRANSFORM","Browser","ie3d","x","y","CanvasLayer","options","_map","_canvas","_frame","_delegate","setOptions","del","Util","requestAnimFrame","drawLayer","resizeEvent","width","newSize","height","topLeft","containerPointToLayerPoint","setPosition","events","resize","_onLayerDidResize","moveend","_onLayerDidMove","zoom","zoomAnimation","any3d","zoomanim","_animateZoom","map","create","tiles","size","getSize","animated","addClass","_panes","overlayPane","appendChild","on","getEvents","onLayerDidMount","needRedraw","onLayerWillUnmount","getPanes","removeChild","off","addLayer","latlon","lng","Math","PI","log","tan","lat","bounds","getBounds","getZoom","center","LatLonToMercator","getCenter","corner","containerPointToLatLng","info","points","layer","canvas","onDrawLayer","e","getZoomScale","Layer","_latLngBoundsToNewLayerBounds","min","_getCenterOffset","_multiplyBy","subtract","_getMapPanePos","App","callBackendAPI","a","async","fetch","host","response","json","body","console","express","status","alert","Error","message","customNav","createRef","location","getHost","token","Cookies","get","login","getUser","loginModal","getLoginModal","zIndex","osmThumbnail","mode","index","centreData","objData","fault","priority","sizes","photos","currentPhoto","currentFault","layers","icon","getCustomIcon","show","showLogin","showContact","showTerms","showAbout","modalPhoto","popover","filterModal","activeSelection","photourl","amazon","password","projectArr","getProjects","faultClass","faultTypes","pageActive","checkedFaults","checked","activeProject","activeLayers","clearDisabled","current","setOnClick","catch","err","leafletElement","canvasLayer","delegate","addTo","gl","getContext","antialias","cookie","undefined","JSON","parse","clickLogin","logout","data","iconUrl","iconSize","iconAnchor","i","length","position","st_asgeojson","coordinates","latlng","latLng","obj","roadid","carriage","carriagewa","photo","photoid","datetime","faulttime","push","lineData","linestring","segment","j","point","target","getFault","direction","intSuffix","parseInt","slice","n","newSuffix","pad","newPhoto","getPhoto","url","remove","method","credentials","headers","stringify","clearCache","userInput","value","key","passwordInput","result","set","expires","buildProjects","projects","error","prj","attributes","code","project","description","date","filterLayer","splice","filter","addMarkers","menu","addCentrelines","classes","getFaultTypes","cls","type","faults","arr","loadFilters","z","Array","join","random","toString","substr","attribute","centre","CustomMenu","p","drop","Divider","Navbar","bg","expand","Brand","src","alt","loadLayer","clickFilter","removeLayer","loadCentreline","clickTerms","clickContact","documentation","clickAbout","ref","Map","worldCopyJump","boxZoom","onZoom","TileLayer","attribution","ScaleControl","Image","toogleMap","thumbnail","LayersControl","Overlay","name","LayerGroup","Marker","draggable","clickMarker","Popup","clickImage","latlngs","Polyline","weight","color","getColor","smoothFactor","positions","Modal","centered","Header","Title","Pagination","active","clickPage","Body","Table","striped","bordered","hover","isChecked","onChange","changeCheck","Footer","Button","variant","clearFilter","submitFilter","clickClose","Form","Group","controlId","Label","Control","placeholder","clickPrev","closePhotoModal","clickNext","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","document","getElementById","URL","process","origin","addEventListener","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.8349d226.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Nav, NavDropdown}  from 'react-bootstrap';\r\n\r\nexport default class CustomNav extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            title: \"Login\",\r\n            onClick: null\r\n        }\r\n    }\r\n\r\n    setTitle = (user) => {\r\n      this.setState({title: user});\r\n    }\r\n\r\n    setOnClick(func) {\r\n      this.setState({onClick: func});\r\n    }\r\n    \r\n    componentDidMount() {\r\n    }\r\n    \r\n    componentWillUnmount() {\r\n\r\n    }\r\n\r\n    render() {\r\n        if (this.state.title === 'Login') {\r\n            return (\r\n              <Nav className=\"ml-auto\">\r\n                <Nav.Link  id=\"Login\" href=\"#login\" onClick={this.state.onClick}>{this.state.title} </Nav.Link>\r\n              </Nav>);\r\n          } else {\r\n            return (\r\n            <Nav className=\"ml-auto\"><NavDropdown className=\"navdropdown\" title={this.state.title} id=\"basic-nav-dropdown\">\r\n              <NavDropdown.Item className=\"navdropdownitem\" href=\"#login\"  onClick={this.state.onClick}>Logout</NavDropdown.Item>\r\n            </NavDropdown></Nav>);\r\n          }\r\n    }\r\n}\r\n\r\n","//https://github.com/unicef/react-webgl-leaflet/blob/master/src/canvas-layer.js\r\n\r\nimport L, { Layer } from 'leaflet'\r\n\r\n// -- L.DomUtil.setTransform from leaflet 1.0.0 to work on 0.0.7\r\nL.DomUtil.setTransform = L.DomUtil.setTransform || function(el, offset, scale) {\r\n  var pos = offset || new L.Point(0, 0);\r\n\r\n  el.style[L.DomUtil.TRANSFORM] =\r\n    (L.Browser.ie3d ?\r\n      'translate(' + pos.x + 'px,' + pos.y + 'px)' :\r\n      'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') +\r\n    (scale ? ' scale(' + scale + ')' : '');\r\n};\r\n\r\n\r\n/*\r\n  Generic  Canvas Layer for leaflet 0.7 and 1.0-rc,\r\n  copyright Stanislav Sumbera,  2016 , sumbera.com , license MIT\r\n  originally created and motivated by L.CanvasOverlay  available here: https://gist.github.com/Sumbera/11114288\r\n*/\r\nexport default class CanvasLayer extends Layer {\r\n\r\n  // -- initialized is called on prototype\r\n  initialize(options) {\r\n    this._map = null;\r\n    this._canvas = null;\r\n    this._frame = null;\r\n    this._delegate = null;\r\n    L.setOptions(this, options);\r\n  }\r\n\r\n  delegate(del) {\r\n    this._delegate = del;\r\n    return this;\r\n  }\r\n\r\n  needRedraw() {\r\n    if (!this._frame) {\r\n      this._frame = L.Util.requestAnimFrame(this.drawLayer, this);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  //-------------------------------------------------------------\r\n  _onLayerDidResize(resizeEvent) {\r\n    this._canvas.width = resizeEvent.newSize.x;\r\n    this._canvas.height = resizeEvent.newSize.y;\r\n  }\r\n  //-------------------------------------------------------------\r\n  _onLayerDidMove() {\r\n    var topLeft = this._map.containerPointToLayerPoint([0, 0]);\r\n    L.DomUtil.setPosition(this._canvas, topLeft);\r\n    this.drawLayer();\r\n  }\r\n  //-------------------------------------------------------------\r\n  getEvents() {\r\n    var events = {\r\n      resize: this._onLayerDidResize,\r\n      moveend: this._onLayerDidMove,\r\n      zoom: this._onLayerDidMove\r\n    };\r\n    if (this._map.options.zoomAnimation && L.Browser.any3d) {\r\n      events.zoomanim = this._animateZoom;\r\n    }\r\n\r\n    return events;\r\n  }\r\n  //-------------------------------------------------------------\r\n  onAdd(map) {\r\n\r\n    this._map = map;\r\n    this._canvas = L.DomUtil.create('canvas', 'leaflet-layer');\r\n    this.tiles = {};\r\n\r\n    var size = this._map.getSize();\r\n    this._canvas.width = size.x;\r\n    this._canvas.height = size.y;\r\n\r\n    var animated = this._map.options.zoomAnimation && L.Browser.any3d;\r\n    L.DomUtil.addClass(this._canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\r\n\r\n\r\n    map._panes.overlayPane.appendChild(this._canvas);\r\n\r\n    map.on(this.getEvents(), this);\r\n\r\n    var del = this._delegate.state || this.state;\r\n\r\n    del.onLayerDidMount && del.onLayerDidMount(); // -- callback\r\n    this.needRedraw();\r\n  }\r\n\r\n  //-------------------------------------------------------------\r\n  onRemove(map) {\r\n    var del = this._delegate || this;\r\n    del.onLayerWillUnmount && del.onLayerWillUnmount(); // -- callback\r\n\r\n\r\n    map.getPanes().overlayPane.removeChild(this._canvas);\r\n\r\n    map.off(this.getEvents(), this);\r\n\r\n    this._canvas = null;\r\n\r\n  }\r\n\r\n  //------------------------------------------------------------\r\n  addTo(map) {\r\n    map.addLayer(this);\r\n    return this;\r\n  }\r\n  // --------------------------------------------------------------------------------\r\n  LatLonToMercator(latlon) {\r\n    return {\r\n      x: latlon.lng * 6378137 * Math.PI / 180,\r\n      y: Math.log(Math.tan((90 + latlon.lat) * Math.PI / 360)) * 6378137\r\n    };\r\n  }\r\n\r\n  //------------------------------------------------------------------------------\r\n  drawLayer() {\r\n    // -- todo make the viewInfo properties  flat objects.\r\n    var size = this._map.getSize();\r\n    var bounds = this._map.getBounds();\r\n    var zoom = this._map.getZoom();\r\n\r\n    var center = this.LatLonToMercator(this._map.getCenter());\r\n    var corner = this.LatLonToMercator(this._map.containerPointToLatLng(this._map.getSize()));\r\n\r\n    var del = this._delegate.state || this.state;\r\n    let info = {\r\n      points: this._delegate.props.points,\r\n      layer: this,\r\n      canvas: this._canvas,\r\n      bounds: bounds,\r\n      size: size,\r\n      zoom: zoom,\r\n      center: center,\r\n      corner: corner\r\n    }\r\n    this._delegate.state.info = info\r\n    del.onDrawLayer && del.onDrawLayer(info);\r\n    this._frame = null;\r\n  }\r\n  // -- L.DomUtil.setTransform from leaflet 1.0.0 to work on 0.0.7\r\n  //------------------------------------------------------------------------------\r\n  _setTransform(el, offset, scale) {\r\n    var pos = offset || new L.Point(0, 0);\r\n\r\n    el.style[L.DomUtil.TRANSFORM] =\r\n      (L.Browser.ie3d ?\r\n        'translate(' + pos.x + 'px,' + pos.y + 'px)' :\r\n        'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') +\r\n      (scale ? ' scale(' + scale + ')' : '');\r\n  }\r\n\r\n  //------------------------------------------------------------------------------\r\n  _animateZoom(e) {\r\n    var scale = this._map.getZoomScale(e.zoom);\r\n    // -- different calc of animation zoom  in leaflet 1.0.3 thanks @peterkarabinovic, @jduggan1\r\n    var offset = L.Layer ? this._map._latLngBoundsToNewLayerBounds(this._map.getBounds(), e.zoom, e.center).min :\r\n      this._map._getCenterOffset(e.center)._multiplyBy(-scale).subtract(this._map._getMapPanePos());\r\n\r\n    L.DomUtil.setTransform(this._canvas, offset, scale);\r\n  }\r\n\r\n}","import React from 'react';\r\nimport { Map, TileLayer, Marker, Polyline, Popup, ScaleControl, LayersControl, LayerGroup}  from 'react-leaflet';\r\nimport {Navbar, Nav, NavDropdown, Modal, Button, Image, Form, Dropdown, Table, Pagination}  from 'react-bootstrap';\r\nimport L from 'leaflet';\r\nimport './App.css';\r\nimport './util.js';\r\nimport CustomNav from './CustomNav.js';\r\nimport CanvasLayer from './canvas-layer'\r\nimport Cookies from 'js-cookie';\r\n\r\nclass App extends React.Component {\r\n\r\n  constructor(props) {\r\n    \r\n    //const osmURL = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\r\n    \r\n    super(props);\r\n\r\n    this.customNav = React.createRef();\r\n    this.state = {\r\n      location: {\r\n        lat: -41.2728,\r\n        lng: 173.2995,\r\n      },\r\n      host: this.getHost(),\r\n      token: Cookies.get('token'),\r\n      login: this.getUser(),\r\n      loginModal: this.getLoginModal(this.getUser()),\r\n      zIndex: 900,\r\n      //tileServer: \"//api.mapbox.com/styles/v1/mapbox/satellite-streets-v11/tiles/{z}/{x}/{y}?access_token=\" + process.env.MAPBOX,\r\n      osmThumbnail: \"satellite64.png\",\r\n      mode: \"map\",\r\n      zoom: 8,\r\n      index: null,\r\n      centreData: [],\r\n      objData: [],\r\n      fault: [],\r\n      priority: [],\r\n      sizes: [],\r\n      photos: [],\r\n      currentPhoto: null,\r\n      currentFault: [],\r\n      layers: [],\r\n      bounds: {},\r\n      icon: this.getCustomIcon(),\r\n      show: false,\r\n      showLogin: false,\r\n      showContact: false,\r\n      showTerms: false,\r\n      showAbout: false,\r\n      modalPhoto: null,\r\n      popover: false,\r\n      filterModal: false,\r\n      activeSelection: \"Fault Type\",\r\n      photourl: null,\r\n      amazon: null,\r\n      user: this.getUser(),\r\n      password: null,\r\n      projectArr: this.getProjects(),\r\n      faultClass: [],\r\n      faultTypes: [],\r\n      pageActive: 0,\r\n      checkedFaults: [],\r\n      checked: false,\r\n      activeProject: null,\r\n      activeLayers: [],\r\n      clearDisabled: true\r\n    };\r\n    \r\n  }\r\n\r\n  getHost() {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      return \"localhost:5000\";\r\n    } else if (process.env.NODE_ENV === \"production\") {\r\n      return \"osmium.nz\";\r\n    } else {\r\n      return \"localhost:5000\"\r\n    }\r\n   }\r\n\r\n  componentDidMount() {\r\n    // Call our fetch function below once the component mounts\r\n    this.customNav.current.setTitle(this.state.user);\r\n    this.customNav.current.setOnClick(this.state.loginModal);\r\n    this.callBackendAPI()\r\n    .catch(err => alert(err));\r\n    //console.log(process.env.NODE_ENV);\r\n\r\n    const map = this.map.leafletElement;\r\n    L.canvasLayer = function() {\r\n      return new CanvasLayer();\r\n    };\r\n\r\n    let cl = L.canvasLayer()\r\n    var glLayer = cl.delegate(this).addTo(map);\r\n    var canvas = glLayer._canvas\r\n    var gl = canvas.getContext('experimental-webgl', {\r\n      antialias: true\r\n    }) || canvas.getContext('experimental-webgl');\r\n    if (!gl) {\r\n      //console.log(\"gl not intialized\");\r\n      return;\r\n    } else {\r\n      console.log(\"gl: \" + gl.canvas.width + \" \" + gl.canvas.height);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {   \r\n    \r\n\r\n  }\r\n\r\n  callBackendAPI = async () => {\r\n    const response = await fetch('http://' + this.state.host + '/api'); \r\n    const body = await response.json();\r\n    console.log(body.express);\r\n    if (response.status !== 200) {\r\n      alert(body);   \r\n      throw Error(body.message) \r\n    }\r\n    return body;\r\n  };\r\n\r\n  getProjects() {\r\n    let cookie = Cookies.get('projects');\r\n    if (cookie === undefined) {\r\n      return [];\r\n    } else {\r\n      return JSON.parse(cookie);\r\n    }    \r\n  }\r\n  /**\r\n   * Checks if user has cookie. If not not logged in.\r\n   * Returns username in cookie if found else 'Login'\r\n   */\r\n  getUser() {\r\n    let cookie = Cookies.get('user');\r\n    if (cookie === undefined) {\r\n      return \"Login\";\r\n    } else {\r\n      return cookie;\r\n    }    \r\n  }\r\n\r\n  getLoginModal(user) {\r\n    if (user === \"Login\") {\r\n      return (e) => this.clickLogin(e);\r\n    } else {\r\n      return (e) => this.logout(e);\r\n    }\r\n  }\r\n\r\n  getCustomIcon(data, zoom) {\r\n    let icon = null;\r\n    const size = this.getSize(zoom);\r\n    if (data === \"5\") {\r\n      icon = L.icon({\r\n      iconUrl: 'CameraSpringGreen_16px.png',\r\n      iconSize: [size, size],\r\n      iconAnchor: [size / 2, size / 2],\r\n      });\r\n    } else if (data === \"4\") {\r\n      icon = L.icon({\r\n      iconUrl: 'CameraOrange_16px.png',\r\n      iconSize: [size, size],\r\n      iconAnchor: [size / 2, size / 2],\r\n      });      \r\n    } else if (data === \"3\") {\r\n      icon = L.icon({\r\n      iconUrl: 'CameraLemon_16px.png',\r\n      iconSize: [size, size],\r\n      iconAnchor: [size / 2, size / 2],\r\n      });\r\n    } else  {\r\n      icon = L.icon({\r\n      iconUrl: 'CameraSpringGreen_16px.png',\r\n      iconSize: [size, size],\r\n      iconAnchor: [size / 2, size / 2],\r\n      });\r\n    }  \r\n    return icon;\r\n  }\r\n\r\n  /**\r\n   * returns the current icon size when zoom level changes\r\n   * @param {the current zoom level} zoom \r\n   */\r\n  getSize(zoom) {\r\n    if (zoom < 10) {\r\n      return 4;\r\n    } else if (zoom >= 10 && zoom <= 14) {\r\n      return 10;\r\n    } else if (zoom > 14 && zoom <= 16) {\r\n      return 16;\r\n    } else if  (zoom > 16 && zoom <= 18){\r\n      return 20;\r\n    } else {\r\n      return 32;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds db data to various arrays and an object. Then sets state to point to arrays. \r\n   * @param {data retreived from database} data\r\n   */\r\n\r\n  async addMarkers(data) {\r\n    let objData = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n      let obj = {};\r\n      const position = JSON.parse(data[i].st_asgeojson);\r\n      const lng = position.coordinates[0];\r\n      const lat = position.coordinates[1];\r\n      let latlng = L.latLng(lat, lng);\r\n      obj = {\r\n        roadid: data[i].roadid,\r\n        carriage: data[i].carriagewa,\r\n        location: data[i].location,\r\n        fault: data[i].fault,\r\n        size: data[i].size,\r\n        priority: data[i].priority,\r\n        photo: data[i].photoid,\r\n        datetime: data[i].faulttime,\r\n        latlng: latlng\r\n      };\r\n      objData.push(obj);    \r\n    }\r\n    this.setState({objData: objData});\r\n  }\r\n\r\n  addCentrelines(data) {\r\n    let lineData = [];\r\n    console.log(data.length);\r\n    for (var i = 0; i < data.length; i++) {\r\n      const linestring = JSON.parse(data[i].st_asgeojson); \r\n      if(linestring !== null) {\r\n        var points = [];\r\n        var segment = linestring.coordinates[0];\r\n        for (var j = 0; j < segment.length; j++) {\r\n          var point = segment[j];\r\n          let latlng = L.latLng(point[1], point[0]);\r\n          points.push(latlng);\r\n        }     \r\n      }\r\n      lineData.push(points);\r\n    }\r\n    this.setState({centreData: lineData});\r\n  }\r\n\r\n  \r\n\r\n  //EVENTS\r\n  /**\r\n   * fires when user scrolls mousewheel\r\n   * param - e the mouse event\r\n   **/\r\n  onZoom(e) {\r\n    this.setState({zoom: e.target.getZoom()});\r\n    this.setState({bounds: e.target.getBounds()});\r\n  }\r\n\r\n  /**\r\n   * toogles between satellite and map view by swapping z-index\r\n   * @param {the control} e \r\n   */\r\n  toogleMap(e) {\r\n    if (this.state.mode === \"map\") {\r\n      this.setState({zIndex: 1000});\r\n      this.setState({mode: \"sat\"});\r\n      this.setState({osmThumbnail: \"map64.png\"});\r\n    } else {\r\n      this.setState({zIndex: 900});\r\n      this.setState({mode: \"map\"});\r\n      this.setState({osmThumbnail: \"satellite64.png\"})\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fired when user clciks photo on thumbnail\r\n   * @param {event} e \r\n   */\r\n  clickImage(e) {    \r\n    this.setState({show: true});\r\n    let photo = this.getFault(this.state.index, 'photo');\r\n    this.setState({currentPhoto: photo});\r\n  }\r\n\r\n  getPhoto(direction) {\r\n    let photo = this.state.currentPhoto;\r\n    let intSuffix = (parseInt(photo.slice(photo.length - 5, photo.length)));\r\n    let n = null;\r\n    if (direction === \"prev\") {\r\n      n = intSuffix - 1;\r\n    } else {\r\n      n = intSuffix + 1;\r\n    }\r\n    let newSuffix = this.pad(n, 5);\r\n    let prefix = photo.slice(0, photo.length - 5);\r\n    let newPhoto = prefix + newSuffix;\r\n    this.setState({currentPhoto: newPhoto});\r\n    return newPhoto;\r\n  }\r\n\r\n  clickPrev(e) {\r\n  const newPhoto = this.getPhoto(\"prev\");\r\n  console.log(newPhoto);\r\n  this.setState({currentPhoto: newPhoto});\r\n\tconst url = this.state.amazon + newPhoto + \".jpg\";\r\n  this.setState({photourl: url});\r\n  }\r\n  \r\n  clickNext(e) {\r\n  const newPhoto = this.getPhoto(\"next\");\r\n  this.setState({currentPhoto: newPhoto});\r\n  const url = this.state.amazon + newPhoto + \".jpg\";\r\n\tthis.setState({photourl: url});\r\n  }\r\n\r\n  clickMarker(e) {\r\n    let marker = e.target;\r\n    const index = marker.options.index;\r\n    this.setState({index: index});\r\n    this.setState({popover: true});\r\n  }\r\n\r\n  clearCache() {\r\n    Cookies.remove('token');\r\n    Cookies.remove('user');\r\n    Cookies.remove('projects');\r\n    this.setState({login: \"Login\"});\r\n    this.customNav.current.setOnClick((e) => this.clickLogin(e));\r\n    this.customNav.current.setTitle(\"Login\");\r\n    \r\n    this.setState({activeProject: null})\r\n    this.setState({projectArr: []});\r\n    this.setState({checkedFaults: []});\r\n    this.setState({objData: []});\r\n  }\r\n\r\n  async logout(e) {\r\n    const response = await fetch('http://' + this.state.host + '/logout', {\r\n      method: 'POST',\r\n      credentials: 'same-origin',\r\n      headers: {\r\n        \"authorization\": this.state.token,\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',        \r\n      },\r\n      body: JSON.stringify({\r\n        user: this.state.login,\r\n      })\r\n    });\r\n    const body = await response.json();\r\n    //console.log(response);\r\n    if (response.status !== 200) {\r\n      throw Error(body.message) \r\n    } \r\n    this.clearCache();\r\n  }\r\n\r\n  async login(e) {\r\n    this.setState({showLogin: false});\r\n    const response = await fetch('http://' + this.state.host + '/login', {\r\n      method: 'POST',\r\n      credentials: 'same-origin',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',        \r\n      },\r\n      body: JSON.stringify({\r\n        user: this.userInput.value,\r\n        key: this.passwordInput.value\r\n      })\r\n    });\r\n    const body = await response.json();\r\n    console.log(body);\r\n    if (response.status !== 200) {\r\n      throw Error(body.message) \r\n    } \r\n    \r\n    if (body.result) {\r\n      console.log(\"user: \" + body.user + \" Login succeded\");\r\n      Cookies.set('token', body.token, { expires: 7 });\r\n      Cookies.set('user', body.user, { expires: 7 });\r\n      this.setState({login: body.user});\r\n      this.setState({token: body.token});\r\n      //this.setState({loginModal: (e) => this.logout(e)}); \r\n      //console.log(body.projects);     \r\n      this.buildProjects(body.projects);   \r\n      this.customNav.current.setTitle(body.user);\r\n      this.customNav.current.setOnClick((e) => this.logout(e));\r\n    } else {\r\n\r\n      console.log(body.error);\r\n    }  \r\n  }\r\n\r\n  buildProjects(projects) {\r\n    \r\n    let prj = []\r\n    for(var i = 0; i < projects.length; i += 1) {\r\n      prj.push(projects[i]);\r\n    }\r\n    //console.log(prj);\r\n    Cookies.set('projects', JSON.stringify(prj), { expires: 7 })\r\n    this.setState({projectArr: prj});\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {event} e \r\n   */\r\n  loadLayer(e) {\r\n    this.setState({activeProject: e.target.attributes.code.value});\r\n    for (var i = 0; i < this.state.projectArr.length; i += 1) {\r\n      if (this.state.projectArr[i].code === e.target.attributes.code.value) {\r\n        let project = {code: this.state.projectArr[i].code, description: this.state.projectArr[i].description, date: this.state.projectArr[i].date}\r\n        this.setState({amazon: this.state.projectArr[i].amazon});\r\n        this.state.activeLayers.push(project);\r\n      }\r\n    }\r\n    this.filterLayer(e.target.attributes.code.value);  \r\n    \r\n  }\r\n\r\n  removeLayer(e) {\r\n    console.log(e.target.attributes.code.value);\r\n    console.log(this.state.activeLayers);\r\n    let layers = this.state.activeLayers;\r\n    for(var i = 0; i < layers.length; i += 1) {\r\n     \r\n      if (e.target.attributes.code.value === layers[i].code) {\r\n        console.log(layers[i]);\r\n        layers.splice(i, 1);\r\n        break;\r\n      }\r\n     \r\n    }\r\n    //TODO clear the filter\r\n    this.setState({activeLayers: layers});\r\n  }\r\n\r\n\r\n  async filterLayer(project) {\r\n    if (this.state.login !== \"Login\") {\r\n      const response = await fetch('http://' + this.state.host + '/layer', {\r\n      method: 'POST',\r\n      headers: {\r\n        \"authorization\": this.state.token,\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        user: this.state.login,\r\n        project: project,\r\n        filter: this.state.checkedFaults   \r\n      })\r\n    })\r\n    if (response.status !== 200) {\r\n      console.log(response.status);\r\n    } \r\n    const body = await response.json();\r\n    await this.addMarkers(body);\r\n    } else {\r\n      \r\n    }    \r\n  }\r\n\r\n  submitFilter(e) {\r\n    this.setState({filterModal: false});\r\n    this.filterLayer(this.state.activeProject);\r\n\r\n  }\r\n\r\n  async loadCentreline(e) {\r\n    if (this.state.login !== \"Login\") {\r\n        const response = await fetch('http://' + this.state.host + '/roads', {\r\n        method: 'POST',\r\n        headers: {\r\n          \"authorization\": this.state.token,\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          code: \"900\",\r\n          menu: e.target.id,\r\n          user: this.state.login\r\n        })\r\n      })\r\n      if (response.status !== 200) {\r\n        console.log(response.status);\r\n      } \r\n      const body = await response.json();\r\n      await this.addCentrelines(body);\r\n    } else {\r\n      \r\n    }    \r\n  }\r\n\r\n  async loadFilters() {\r\n    if (this.state.login !== \"Login\") {\r\n      const response = await fetch('http://' + this.state.host + '/class', {\r\n        method: 'POST',\r\n        headers: {\r\n          \"authorization\": this.state.token,\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          user: this.state.login\r\n        })\r\n      })\r\n      if (response.status !== 200) {\r\n        console.log(response.status);\r\n      } \r\n      const classes = await response.json();\r\n      this.setState({faultClass: classes});\r\n      this.getFaultTypes(this.state.faultClass[0].code);\r\n    }\r\n  }\r\n\r\n  async getFaultTypes(cls) {\r\n    //console.log(\"type: \" + cls);\r\n    if (this.state.login !== \"Login\") {\r\n      const response = await fetch('http://' + this.state.host + '/faults', {\r\n        method: 'POST',\r\n        headers: {\r\n          \"authorization\": this.state.token,\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          user: this.state.login,\r\n          type: cls\r\n        })\r\n      })\r\n      if (response.status !== 200) {\r\n        console.log(response.status);\r\n      } \r\n      const faults = await response.json();\r\n      faults.map(obj => obj[\"type\"] = cls)\r\n      //console.log(faults);\r\n      this.setState({faultTypes: faults});\r\n    }\r\n  }\r\n\r\n  clickLogin(e) {\r\n    this.setState({showLogin: true});   \r\n  }\r\n\r\n  clickAbout(e) {\r\n    this.setState({showAbout: true});  \r\n  }\r\n\r\n  clickTerms(e) {\r\n    this.setState({showTerms: true});  \r\n  }\r\n\r\n  clickContact(e) {\r\n    this.setState({showContact: true});  \r\n  }\r\n\r\n  clickClose(e) {\r\n    this.setState({showContact: false});\r\n    this.setState({showAbout: false});    \r\n    this.setState({showTerms: false});    \r\n  }\r\n\r\n  clickPage(index) {\r\n    this.setState({pageActive: index});\r\n    this.getFaultTypes(this.state.faultClass[index].code);\r\n  }\r\n\r\n  changeCheck(e) {\r\n    //if checked true we are adding values to arr\r\n    let arr = this.state.checkedFaults;\r\n    if (e.target.checked) {\r\n      arr.push(e.target.id);                \r\n    } else {\r\n      for (var i = 0; i < arr.length; i += 1) {\r\n        if (e.target.id === arr[i]) {\r\n          arr.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n    }  \r\n    this.setState({checkedFaults: arr});\r\n  }\r\n\r\n/**\r\n * checks if each fault is checked by searching checkedFault array\r\n * @param {the id of the checkbox i.e. fault type} value \r\n * @return {}\r\n */\r\n  isChecked(value) {\r\n    for (var i = 0; i < this.state.checkedFaults.length; i += 1) {\r\n      if (value === this.state.checkedFaults[i]) {\r\n        return true;\r\n      }     \r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * called when photoviewer closed\r\n   */\r\n  closeModal() {\r\n    this.setState({show: false});\r\n    this.setState({popover: false});\r\n  }\r\n\r\n  clickFilter(e) {\r\n    this.setState({index: null});\r\n    this.setState({filterModal: true});\r\n    this.loadFilters();\r\n  }\r\n\r\n  /**\r\n   * clear checked fault array \r\n   * @param {the button} e \r\n   */\r\n  clearFilter(e) {\r\n    this.setState({checkedFaults: []});\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {the number to pad} n \r\n   * @param {the amount of pading} width \r\n   * @param {digit to pad out number with (default '0'} z \r\n   * @return {the padded number (string)}\r\n   */\r\n  pad(n, width, z) {\r\n    z = z || '0';\r\n    n = n + '';\r\n    return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\r\n    }\r\n\r\n  /**\r\n   * returns a random hex color\r\n   */\r\n  getColor() {\r\n    return '#' +  Math.random().toString(16).substr(-6);\r\n  }\r\n/**\r\n * gets the requested attribute from the fault object array\r\n * @param {the index of marker} index \r\n * @param {the property of the fault} attribute \r\n */\r\n  getFault(index, attribute) {\r\n    //console.log(index);\r\n    if (this.state.objData.length !== 0 && index !== null) {\r\n      switch(attribute) {\r\n        case \"fault\":\r\n          return  this.state.objData[index].fault;\r\n        case \"priority\":        \r\n          return  this.state.objData[index].priority;\r\n        case \"location\":\r\n          return  this.state.objData[index].location;\r\n        case \"size\":\r\n          return  this.state.objData[index].size;\r\n        case \"datetime\":\r\n          return  this.state.objData[index].datetime;\r\n        case \"photo\":\r\n          return  this.state.objData[index].photo;\r\n        default:\r\n          return null;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  tableLoad(e) {\r\n    console.log(e.target);\r\n  }\r\n\r\n  closePhotoModal(e) {\r\n   \r\n    this.setState({show: false});\r\n  }\r\n\r\n  clickGroup(e) {\r\n    console.log(\"click\");\r\n  }\r\n  //RENDER\r\n\r\n  render() {\r\n    //console.log(\"render\");\r\n    const centre = [this.state.location.lat, this.state.location.lng];\r\n    const { fault } = this.state.fault;\r\n    const { photo } = this.state.photos;  \r\n\r\n    const CustomTile = function CustomTile (props) {\r\n        return (\r\n            <TileLayer className=\"mapLayer\"\r\n            attribution=\"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors and Chat location by Iconika from the Noun Project\"\r\n            url={\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}\r\n          />\r\n      );\r\n    }\r\n\r\n    const LayerNav = function LayerNav(props) {\r\n      const loadLayer = props.loadLayer;\r\n      const clickFilter = props.clickFilter;\r\n      const removeLayer= props.removeLayer;\r\n      if (props.project !== null) {\r\n        return (\r\n          <Nav>          \r\n          <NavDropdown className=\"navdropdown\" title=\"Layers\" id=\"basic-nav-dropdown\">\r\n            <CustomMenu title=\"Add Layer\" className=\"navdropdownitem\" projects={props.projects} onClick={loadLayer}/>\r\n            <NavDropdown.Divider />\r\n            {/* <NavDropdown.Item className=\"navdropdownitem\" href=\"#centreline\" onClick={(e) => this.removeLayer(e)}>Remove Layer </NavDropdown.Item>\r\n            <NavDropdown.Divider /> */}\r\n            <CustomMenu title=\"Remove Layer\" className=\"navdropdownitem\" projects={props.layers} onClick={removeLayer}/>\r\n            <NavDropdown.Divider />\r\n            <NavDropdown.Item className=\"navdropdownitem\" href=\"#centreline\" onClick={(e) => this.loadCentreline(e)}>Add centreline </NavDropdown.Item>\r\n            <NavDropdown.Divider />\r\n            <NavDropdown.Item className=\"navdropdownitem\" href=\"#filter\"  onClick={(e) => clickFilter(e)}>Filter Layer</NavDropdown.Item>\r\n          </NavDropdown>\r\n        </Nav>\r\n        );\r\n      } else {\r\n        return (\r\n          <Nav>          \r\n          <NavDropdown className=\"navdropdown\" title=\"Layers\" id=\"basic-nav-dropdown\">\r\n            <CustomMenu title=\"Add Layer\" className=\"navdropdownitem\" projects={props.projects} onClick={(e) => loadLayer(e)}/>\r\n            <NavDropdown.Divider />\r\n            <NavDropdown.Item title=\"Remove Layer\" className=\"navdropdownitem\" href=\"#centreline\" onClick={(e) => this.removeLayer(e)}>Remove layer</NavDropdown.Item>\r\n            {/* <NavDropdown.Divider />\r\n            <NavDropdown.Item className=\"navdropdownitem\" href=\"#filter\"  onClick={(e) => this.clickFilter(e)}>Filter Layer</NavDropdown.Item> */}\r\n          </NavDropdown>\r\n        </Nav>\r\n        );\r\n      }\r\n    }\r\n\r\n    const CustomMenu = function(props) {\r\n      const p = props.projects;\r\n      const loadLayer = props.onClick;\r\n      if (p === undefined) {\r\n        //console.log(\"Projects\" + p);\r\n        return ( \r\n          <NavDropdown.Item title={props.title} className=\"dropdownitem\">Add Layers\r\n          </NavDropdown.Item>\r\n          );\r\n      } else if(p.length === 0) {\r\n        return ( \r\n          <NavDropdown.Item title={props.title} className=\"dropdownitem\">Add Layers\r\n          </NavDropdown.Item>\r\n          );  \r\n      } else {  \r\n        return (        \r\n          <NavDropdown title={props.title} className=\"navdropdownitem\" drop=\"right\">\r\n          {props.projects.map((value, index) =>      \r\n            <NavDropdown.Item className=\"navdropdownitem\"\r\n              key={`${index}`}\r\n              index={index}\r\n              title={value.code}\r\n              code={value.code}\r\n              onClick={props.onClick}>\r\n                {value.description + \" \" + value.date}\r\n            </NavDropdown.Item>\r\n          )}\r\n          <NavDropdown.Divider />\r\n          </NavDropdown>\r\n          );\r\n      }\r\n    }\r\n\r\n    return (   \r\n      <>     \r\n        <div>\r\n          <Navbar bg=\"light\" expand=\"lg\"> \r\n            <Navbar.Brand href=\"#home\">\r\n            <img\r\n                src=\"logo.png\"\r\n                width=\"122\"\r\n                height=\"58\"\r\n                className=\"d-inline-block align-top\"\r\n                alt=\"logo\"\r\n              />\r\n              </Navbar.Brand>\r\n              <LayerNav project={this.state.activeProject} projects={this.state.projectArr} layers={this.state.activeLayers} removeLayer={(e) => this.removeLayer(e)} loadLayer={(e) => this.loadLayer(e)} clickFilter={(e) => this.clickFilter(e)}></LayerNav>\r\n            <Nav>\r\n              <NavDropdown className=\"navdropdown\" title=\"Help\" id=\"basic-nav-dropdown\">\r\n                <NavDropdown.Item className=\"navdropdownitem\" href=\"#terms\" onClick={(e) => this.clickTerms(e)} >Terms of Use</NavDropdown.Item>\r\n                <NavDropdown.Divider />\r\n                <NavDropdown.Item className=\"navdropdownitem\" href=\"#contact\" onClick={(e) => this.clickContact(e)} >Contact</NavDropdown.Item>\r\n                <NavDropdown.Divider />\r\n                <NavDropdown.Item className=\"navdropdownitem\" id=\"Documentation\" href=\"#documentation\" onClick={(e) => this.documentation(e)}>Documentation</NavDropdown.Item>\r\n                <NavDropdown.Divider />\r\n                <NavDropdown.Item className=\"navdropdownitem\" href=\"#about\" onClick={(e) => this.clickAbout(e)} >About</NavDropdown.Item>             \r\n              </NavDropdown>         \r\n            </Nav>\r\n            <CustomNav ref={this.customNav} className=\"navdropdown\"/>\r\n          </Navbar>         \r\n        </div>      \r\n        <div className=\"map\">\r\n        <Map        \r\n          ref={(ref) => { this.map = ref; }}\r\n          className=\"map\"\r\n          fault={fault}\r\n          photo={photo}\r\n          worldCopyJump={true}\r\n          boxZoom={true}\r\n          center={centre}\r\n          zoom={this.state.zoom}\r\n          onZoom={(e) => this.onZoom(e)}>\r\n          <TileLayer className=\"mapLayer\"\r\n            attribution=\"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors and Chat location by Iconika from the Noun Project\"\r\n            url={\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}\r\n            zIndex={999}\r\n          />\r\n          {/* <NavDropdown className=\"displaytype\" id=\"dropdown-basic-button\" title={this.state.activeSelection}>\r\n            <Dropdown.Item id=\"priority\" href=\"#filterpriority\" onClick={(e) => this.setDisplay(e)}>Priority</Dropdown.Item>\r\n            <Dropdown.Item id=\"type\" href=\"#filtertype\" onClick={(e) => this.setDisplay(e)}>Fault type</Dropdown.Item>\r\n          </NavDropdown> */}\r\n          <ScaleControl/>\r\n          <Image className=\"satellite\" src={this.state.osmThumbnail} onClick={(e) => this.toogleMap(e)} thumbnail={true}/>\r\n          <LayersControl position=\"topright\">\r\n          {this.state.activeLayers.map((layer, index) => \r\n            <LayersControl.Overlay  key={`${index}`} checked name={layer.description + \" \" + layer.date}>\r\n              <LayerGroup >\r\n              {this.state.objData.map((obj, index) =>          \r\n                <Marker \r\n                  key={`${index}`}\r\n                  index={index}\r\n                  data={fault}\r\n                  photo={photo}\r\n                  position={obj.latlng} \r\n                  icon={this.getCustomIcon(this.getFault(index, 'priority'), this.state.zoom)}\r\n                  draggable={false} \r\n                  onClick={(e) => this.clickMarker(e)}\t\t\t\t  \r\n                  >\r\n                  <Popup className=\"popup\">\r\n                  <div>\r\n                    <p className=\"faulttext\">\r\n                      <b>{\"Type: \"}</b> {this.getFault(index, 'fault')} <br></br> <b>{\"Priority: \"} </b> {this.getFault(index, 'priority')} <br></br><b>{\"Location: \"} </b> {this.getFault(index, 'location')}\r\n                    </p>\r\n                    <div>\r\n                    <Image className=\"thumbnail\" src={this.state.amazon + this.getFault(index, 'photo') + \".jpg\"} photo={photo} onClick={(e) => this.clickImage(e)} thumbnail={true}></Image >\r\n                    </div>          \r\n                  </div>\r\n                  </Popup>  \r\n                </Marker>\r\n                )}     \r\n              </LayerGroup>\r\n            </LayersControl.Overlay>\r\n          )}\r\n          </LayersControl>\r\n          {this.state.centreData.map((latlngs, index) => \r\n          <Polyline \r\n            key={`${index}`}\r\n            weight={3}\r\n            //color={'blue'} \r\n            color={this.getColor()}\r\n            smoothFactor={3}\r\n            positions={latlngs}>\r\n          </Polyline>\r\n          )}        \r\n      </Map >   \r\n      </div>\r\n      <Modal className=\"filterModal\" show={this.state.filterModal} size={'lg'} centered={true}>\r\n        <Modal.Header>\r\n          <Modal.Title>Filter</Modal.Title><br></br>\r\n          <Pagination size=\"sm\">\r\n            {this.state.faultClass.map((value, index) =>        \r\n              <Pagination.Item  key={`${index}`} className={\"page-item\"} active={index === this.state.pageActive} onClick={() => this.clickPage(index)}>{value.description}\r\n              </Pagination.Item>          \r\n            )}\r\n          </Pagination>\r\n        </Modal.Header>\r\n        <Modal.Body >\t\r\n        <Table size=\"sm\" striped bordered hover>\r\n          <thead>\r\n          </thead> \r\n          <tbody>      \r\n          {this.state.faultTypes.map((value, index) => \r\n            <tr className='tablerow' key={`${index}`}>\r\n                <td>                   \r\n                <input type=\"checkbox\" id={value.fault} checked={this.isChecked(value.fault)} onChange={(e) => this.changeCheck(e)}/> {value.fault}\r\n                </td>\r\n            </tr>\r\n          )}\r\n          </tbody>\r\n          </Table>\r\n\t\t    </Modal.Body>\r\n        <Modal.Footer>\r\n        <div><Button className=\"clear\" variant=\"primary\" type=\"submit\" onClick={(e) => this.clearFilter(e)}>\r\n            Clear Filter\r\n          </Button>\r\n          </div>\r\n          <div><Button className=\"submit\" variant=\"primary\" type=\"submit\" onClick={(e) => this.submitFilter(e)}>\r\n            Filter\r\n          </Button>\r\n          </div>\r\n          \r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      <Modal className=\"termsModal\" show={this.state.showTerms} size={'md'} centered={true}>\r\n        <Modal.Header>\r\n          <Modal.Title><h2>Road Inspection Viewer</h2></Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body >\t\r\n          By using this software you confirm you have read and agreed to the Onsite Developments Ltd. <a href={\"https://osmium.nz/?#terms\"}> Click for terms of use.</a><br></br>\r\n          All data on this site from Land Information New Zealand is made available under a Creative Commons Attribution Licence.<br></br>\r\n          <span >&copy; 2019 Onsite Developments Ltd. All rights reserved.</span><br></br>\r\n\t\t    </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" type=\"submit\" onClick={(e) => this.clickClose(e)}>\r\n              Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <Modal className=\"aboutModal\" show={this.state.showAbout} size={'md'} centered={true}>\r\n        <Modal.Header>\r\n          <Modal.Title><h2>About</h2> </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body >\t\r\n          <b>Road Inspection Version 1.0</b><br></br>\r\n          Relased: 12/01/2020<br></br>\r\n          Company: Onsite Developments Ltd.<br></br>\r\n          Software Developer: Matt Wynyard <br></br>\r\n          <img src=\"logo192.png\" alt=\"React logo\"width=\"24\" height=\"24\"/> React: 16.12.0<br></br>\r\n          <img src=\"bootstrap.png\" alt=\"Bottstrap logo\" width=\"24\" height=\"24\"/> Bootstrap: 4.4.0<br></br>\r\n          <img src=\"leafletlogo.png\" alt=\"Leaflet logo\" width=\"60\" height=\"16\"/>Leaflet: 1.6.0<br></br>\r\n          <img src=\"reactbootstrap.png\" alt=\"React-Bootstrap logo\" width=\"24\" height=\"24\"/>React-bootstrap: 1.0.0-beta.16<br></br>\r\n          React-leaflet: 2.6.0<br></br>\r\n\t\t    </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" size='sm' type=\"submit\" onClick={(e) => this.clickClose(e)}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <Modal show={this.state.showLogin} size={'sm'} centered={true}>\r\n        <Modal.Header>\r\n          <Modal.Title><img src=\"padlock.png\" alt=\"padlock\" width=\"42\" height=\"42\"/> Login </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body >\t\r\n        <Form>\r\n          <Form.Group controlId=\"userName\">\r\n            <Form.Label>Username</Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"Enter username\" ref={user => this.userInput = user} />\r\n          </Form.Group>\r\n\r\n          <Form.Group controlId=\"formBasicPassword\">\r\n            <Form.Label>Password</Form.Label>\r\n            <Form.Control type=\"password\" placeholder=\"Password\" ref={key=> this.passwordInput = key}/>\r\n          </Form.Group>\r\n          <Button variant=\"primary\" type=\"submit\" onClick={(e) => this.login(e)}>\r\n            Submit\r\n          </Button>\r\n        </Form>\t\r\n\t\t    </Modal.Body>\r\n        <Modal.Footer>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      <Modal show={this.state.show} size={'xl'} >\r\n        <Modal.Body className=\"photoBody\">\t\r\n        <div className=\"container\">\r\n              <div className=\"row\">\r\n              <div className=\"col-md-6\">\r\n                  <b>{\"Type: \"}</b> {this.getFault(this.state.index, 'fault')} <br></br> <b>{\"Priority: \"} </b> {this.getFault(this.state.index, 'priority')} <br></br><b>{\"Location: \"} </b> {this.getFault(this.state.index, 'priority')}\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <b>{\"Size: \"}</b> {this.getFault(this.state.index, 'size')} <br></br> <b>{\"DateTime: \"} </b> {this.getFault(this.state.index, 'datetime')}\r\n              </div>\r\n              </div>\r\n            </div>\t\r\n\t\t      <Image className=\"photo\" src={this.state.amazon + this.state.currentPhoto + \".jpg\"} data={fault} onClick={(e) => this.clickImage(e)} thumbnail></Image >\t\t\r\n\t\t    </Modal.Body >\r\n        <Modal.Footer>\r\n\t\t      <Button className=\"prev\" onClick={(e) => this.clickPrev(e)}> \r\n            Previous\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={(e) => this.closePhotoModal(e)}>\r\n            Close\r\n          </Button>\r\n          <Button className=\"next\" variant=\"primary\" onClick={(e) => this.clickNext(e)}>\r\n            Next\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <div className=\"footer\">\r\n      </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport 'leaflet/dist/leaflet.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n//registerServiceWorker();\r\n"],"sourceRoot":""}